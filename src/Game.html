<section class="container box">
  <span class="tag is-medium is-success is-light">Alive: {blank(_alive)}</span>
  <button
    class="button is-primary"
    id="next"
    disabled="{!_nextEnabled}"
    on:click
  >
    + Generation ({zero(_counter)})
  </button>
  <span class="tag is-medium is-success is-light">Birth: {blank(_birth)}</span>
  <span class="tag is-medium is-danger is-light">Dead: {blank(_dead)}</span>
  <span class="tag is-medium is-info"
    >{calc.title}: {blank(_timeCalc)+calc.unit}</span
  >
  <span class="tag is-medium is-danger is-light">Death: {blank(_death)}</span>
  <span class="tag is-medium is-info is-light"
    >Total: {blank(_alive + _dead)}</span
  >
  <span class="tag is-medium is-info"
    >{showTitle}: {blank(showDiff)+calc.unit}</span
  >
  <span class="tag is-medium is-info is-light">Total: {blank(_total)}</span>
</section>

<style>
  .container {
    display: grid;
    grid-template-columns: 1fr minmax(180px, 1fr) 1fr;
    align-items: center;
    grid-gap: 10px;
  }
</style>

<script>
  import { blank, zero } from "./common/Util.html"
  import { fState } from "./Field.html"
  const { alive, dead } = fState

  /*** Default Component Interface ***/
  export let status, calc, showTitle, showDiff

  /*** Observables ***/
  let _alive, _dead, _birth, _death, _total, _timeCalc, _counter, _nextEnabled
  $: if (status) {
    _alive = status.countState(alive)
    _dead = status.size - _alive
    _birth = status.countChangedState(alive)
    _death = status.countChangedState(dead)
    _total = _birth + _death
    _timeCalc = calc.diff()
    _counter = status.generation
    _nextEnabled = _alive && _total
  }
</script>
