<section class="container box">
  <span class="tag is-medium is-success is-light">Alive: {blank(_alive)}</span>
  <button
    class="button is-primary"
    id="next"
    disabled="{!_nextEnabled}"
    on:click
  >
    {_showName}
  </button>
  <span class="tag is-medium is-success is-light">Birth: {blank(_birth)}</span>
  <span class="tag is-medium is-danger is-light">Dead: {blank(_dead)}</span>
  <span class="tag is-medium is-info is-light"
    >{calc.title}: {blank(_timeCalc)+calc.unit}</span
  >
  <span class="tag is-medium is-danger is-light">Death: {blank(_death)}</span>
  <span class="tag is-medium is-info is-light"
    >Total: {blank(_alive + _dead)}</span
  >
  <span class="tag is-medium is-info is-light"
    >{showTitle}: {blank(showDiff)+calc.unit}</span
  >
  <span class="tag is-medium is-info is-light"
    >Total: {blank(_birth + _death)}</span
  >
</section>

<style>
  .container {
    display: grid;
    grid: repeat(3, 1fr) / 1fr minmax(180px, 1fr) 1fr;
    align-items: center;
    grid-gap: 0 10px;
  }
</style>

<script>
  import { blank } from "./common/Util.html"
  import { fState } from "./Field.html"

  /*** Default Component Interface ***/
  export let status, calc, showTitle, showDiff

  /*** Observables ***/
  let _alive,
    _dead,
    _birth,
    _death,
    _timeCalc,
    _showgen = "-",
    _nextEnabled
  $: if (status) {
    _alive = status.countState(fState.alive)
    _dead = status.size - _alive
    _birth = status.countChangedState(fState.alive)
    _death = status.countChangedState(fState.dead)
    _timeCalc = calc.diff()
    _showgen = status.generation === "" ? "-" : status.generation
    _showName = "+ Generation (" + _showgen + ")"
    _nextEnabled = status.isReady || _birth || _death
  }
  $: _showName = "+ Generation (" + _showgen + ")"
</script>
