<section class="container box">
  <nav class="level">
    <div class="level-left">
      <div class="level-item">
        <label for="dim" class="label">Board length</label>
      </div>
      <div class="level-item">
        <p class="control">
          <input
            class="input control"
            id="dim"
            title="between {dimMin} and {dimMax}!"
            type="number"
            min="{dimMin}"
            max="{dimMax}"
            bind:value="{dimension}"
            on:keyup="{keyEnter}"
            on:change="{checkDimension}"
          />
        </p>
      </div>
      <div class="level-item">
        <!-- prettier-ignore -->
        <Button name="Create Board" on:click="{createBoard}"
		  />
      </div>
      <div class="level-item">
        <!-- prettier-ignore -->
        <Button name="Clear Board" on:click="{clearBoard}"
		  />
      </div>
    </div>
  </nav>
</section>

<script>
  import { createEventDispatcher, onMount } from "svelte"
  import { setFocus, checkMinMax } from "./common/Util.html"
  import Button from "./common/Button.html"

  /*** Default Component Interface ***/
  export let defDimension = 12,
    dimMin = 1,
    dimMax = 1000
  let dimension = defDimension

  /*** Events ***/
  const keyEnter = (ev, key = ev.which) => key === 13 && createBoard(),
    checkDimension = (ev, dim = ev.target.value) =>
      void (dimension = checkMinMax(dim, dimMin, dimMax)),
    //
    dispatch = createEventDispatcher(),
    evt = (action, focus) => (setFocus(focus), dispatch(action, dimension)),
    createBoard = () => evt("create", "next"),
    clearBoard = () => evt("clear", "dim")
  //
  // set the focus to the input element within the start of the page
  onMount(() => {
    setFocus("dim")
  })
</script>
