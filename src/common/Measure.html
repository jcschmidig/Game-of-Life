<script context="module">
  export const createMeasure = _title => {
    let _m1, _m2
    //
    const title = _title,
      _now = () => window.performance.now(),
      start = () => void ([_m1, _m2] = [_now(), null]),
      stop = () => void (_m2 = _now()),
      diff = () => ~~((_m2 - _m1) * 1000) / 1000,
      end = () => (stop(), diff()),
      measure = (action, ...arg) => (start(), action(...arg), end())
    //
    /*** Component Interface ***/
    return {
      // static getter
      title,
      unit: "ms",
      // dynamic getter
      diff,
      // setters
      start,
      stop,
      end,
      measure
    }
  }
</script>
